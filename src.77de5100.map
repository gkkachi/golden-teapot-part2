{"version":3,"sources":["MyObject.ts","hexagon.ts","index.ts"],"names":[],"mappings":"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","file":"src.77de5100.map","sourceRoot":"../src","sourcesContent":["export interface MyObject {\n  vertices: number[][];\n  indices: number[][];\n}\n\nexport interface Buffers {\n  vbo: WebGLRenderbuffer;\n  ibo: WebGLRenderbuffer;\n  count: number;\n}\n\nexport function getBuffers(\n  gl: WebGLRenderingContext,\n  obj: MyObject\n): Buffers | null {\n  const _vbo = gl.createBuffer();\n  const _ibo = gl.createBuffer();\n  if (!_vbo || !_ibo) {\n    return null;\n  }\n\n  const flatten_vertices = flatten(obj.vertices);\n  const flatten_indices = flatten(obj.indices);\n\n  const buff: Buffers = {\n    vbo: _vbo as WebGLBuffer,\n    ibo: _ibo as WebGLBuffer,\n    count: flatten_indices.length\n  };\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buff.vbo);\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(flatten_vertices),\n    gl.STATIC_DRAW\n  );\n  gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buff.ibo);\n  gl.bufferData(\n    gl.ELEMENT_ARRAY_BUFFER,\n    new Int16Array(flatten_indices),\n    gl.STATIC_DRAW\n  );\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n  return buff;\n}\n\nfunction flatten(arr: any[][]): any[] {\n  return arr.reduce((acc, x) => acc.concat(x));\n}\n","import { MyObject } from \"./MyObject\";\n\nexport function getHexagon(length: number): MyObject {\n  return {\n    vertices: getVertices(length),\n    indices: getIndicese(length)\n  };\n}\n\nfunction getVertices(length: number): number[][] {\n  const th = 1.0 / length;\n  const tw2 = th / Math.sqrt(3);\n  const tw = tw2 * 2;\n\n  const arr = [];\n  for (let i = -length; i <= length; i++) {\n    const absi = Math.abs(i);\n\n    const y = th * i;\n    let x = tw2 * absi - 2.0 / Math.sqrt(3);\n    const n = length * 2 + 1 - absi;\n\n    for (let j = 0; j < n; j++) {\n      arr.push([x, y]);\n      x += tw;\n    }\n  }\n\n  return arr;\n}\n\nfunction triangles(top: number, bottom: number, n: number): number[][] {\n  let t = top;\n  let b = bottom;\n  const arr = [];\n\n  for (var i = 0; i < n; i++) {\n    arr.push([t, b, b + 1]);\n    t++;\n    b++;\n  }\n\n  return arr;\n}\n\nfunction getIndicese(length: number): number[][] {\n  let index = 0;\n  let num_triangles = length;\n  let arr: number[][] = [];\n\n  for (let i = 0; i < length; i++) {\n    const next_index = index + length + i + 1;\n    arr = arr.concat(triangles(next_index + 1, index, num_triangles++));\n    arr = arr.concat(triangles(index, next_index, num_triangles));\n    index = next_index;\n  }\n\n  for (let i = 0; i < length; i++) {\n    const next_index = index + 2 * length - i + 1;\n    arr = arr.concat(triangles(next_index, index, num_triangles--));\n    arr = arr.concat(triangles(index + 1, next_index, num_triangles));\n    index = next_index;\n  }\n\n  return arr;\n}\n","import { getBuffers, Buffers } from \"./MyObject\";\nimport { getHexagon } from \"./hexagon\";\n\nvar gl: WebGLRenderingContext;\n\nwindow.onload = () => {\n  const c = document.getElementById(\"webgl\") as HTMLCanvasElement;\n\n  const width = c.width;\n  const height = c.height;\n\n  const _gl = c.getContext(\"webgl\");\n  if (!_gl) {\n    alert(\"ERROR: WebGL API is not available\");\n    return;\n  }\n\n  gl = _gl as WebGLRenderingContext;\n  glInit(width, height);\n\n  const vs = `\n    attribute vec2 xy;\n    varying float r;\n    void main(void) {\n        gl_Position = vec4(xy, 0.0, 1.0);\n        r = sqrt(max(1.0 - dot(xy, xy), 0.0));\n    }`;\n  const fs = `precision mediump float;\n    varying float r;\n    void main(void) {\n        gl_FragColor = vec4(vec3(1.0, 1.0, 1.0) * r, 1.0);\n    }`;\n  const _program = create_program(vs, fs);\n  if (!_program) {\n    console.log(\"ERROR: failed to create a program.\");\n    return;\n  }\n\n  const program = _program as WebGLProgram;\n  const location = gl.getAttribLocation(program, \"xy\");\n  gl.enableVertexAttribArray(location);\n\n  const hexagon = getHexagon(16);\n  const _buff = getBuffers(gl, hexagon);\n  if (!_buff) {\n    console.log(\"ERROR: failed to create a buffer.\");\n    return;\n  }\n  const buff = _buff as Buffers;\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buff.vbo);\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buff.ibo);\n  gl.vertexAttribPointer(location, 2, gl.FLOAT, false, 0, 0);\n\n  gl.drawElements(\n    gl.TRIANGLES,\n    buff.count,\n    gl.UNSIGNED_SHORT,\n    0\n  );\n  gl.flush();\n\n  console.log(\"DONE.\");\n};\n\nfunction glInit(width: number, height: number) {\n  gl.viewport(0, 0, width, height);\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n}\n\nfunction create_program(vs: string, fs: string): WebGLProgram | null {\n  const _program = gl.createProgram();\n  if (!_program) {\n    return null;\n  }\n\n  const program = _program as WebGLProgram;\n  gl.attachShader(program, create_shader(vs, gl.VERTEX_SHADER) as WebGLShader);\n  gl.attachShader(program, create_shader(\n    fs,\n    gl.FRAGMENT_SHADER\n  ) as WebGLShader);\n  gl.linkProgram(program);\n\n  if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    gl.useProgram(program);\n    return program;\n  } else {\n    alert(gl.getProgramInfoLog(program));\n    return null;\n  }\n}\n\nfunction create_shader(code: string, shader_type: number): WebGLShader | null {\n  const _shader = gl.createShader(shader_type);\n  if (!_shader) {\n    return null;\n  }\n\n  const shader = _shader as WebGLShader;\n  gl.shaderSource(shader, code);\n  gl.compileShader(shader);\n\n  if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    return shader;\n  } else {\n    alert(gl.getShaderInfoLog(shader));\n    return null;\n  }\n}\n"]}